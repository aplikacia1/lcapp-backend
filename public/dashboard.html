<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Lištový dashboard</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    :root{
      --hdr-h: 96px;    /* reálnu výšku dopočíta JS */
      --pad-x: 12px;
      --gap: 8px;
      --visible: 3;     /* na mobile vidno 3 tlačidlá; 4. je posunom */
    }

    /* === Jednoduchá pevná hlavička === */
    .app-header{
      position: fixed; inset: 0 0 auto 0; z-index: 1000;
      background: #0c1f4b; border-bottom: 1px solid rgba(255,255,255,.15);
    }
    .app-header-inner{
      max-width: 980px; margin: 0 auto; padding: 8px var(--pad-x);
      display:flex; flex-direction:column; align-items:center; position: relative;
    }

    .logo-small{ display:block; height:48px; object-fit:contain; margin:2px auto 6px; }
    .user-chip{ color:#cfe2ff; font-size:.95rem; text-align:center; margin-bottom:8px; }

    /* Vodorovne posúvateľný rad tlačidiel – mobil/desktop (pôvodné správanie) */
    .nav-scroller{ padding: 0 var(--pad-x); width:100%; }
    .nav-track{
      display:flex; gap: var(--gap);
      overflow-x:auto; overflow-y:hidden;
      -webkit-overflow-scrolling:touch;
      overscroll-behavior-x:contain;
      scrollbar-width:none;
      scroll-snap-type:x mandatory;
      justify-content:center;
    }
    .nav-track::-webkit-scrollbar{ display:none; }

    .pill{
      flex: 0 0 calc((100% - (var(--gap) * (var(--visible) - 1))) / var(--visible));
      height:38px; padding:8px 14px; border-radius:16px;
      border:1px solid rgba(255,255,255,.35);
      background:#fff; color:#0c1f4b; cursor:pointer;
      scroll-snap-align:start;
      white-space:nowrap;
    }
    .pill-danger{ background:#000; color:#fff; border-color:#fff; }

    /* Desktop: všetky 4 vedľa seba (bez scrollu) a centrované */
    @media (min-width: 768px){
      .nav-track{ overflow: visible; }
      .pill{ flex: 0 0 auto; width: auto !important; }
    }

    /* Rezerva pod pevnú hlavičku */
    body{ padding-top: var(--hdr-h); }

    /* Zvyšok (informácie + formuláre) nechávame pôvodne */
    .scrollable-body .main-content{
      padding-bottom: calc(var(--banner-h, 0px) + 24px);
      max-width: 500px;
      margin: 0 auto;
    }

    /* MarSab® badge – nad bannerom (pôvodné správanie) */
    .brand-badge{
      position: fixed; left: 16px; bottom: calc(var(--banner-h, 0px) + 16px); z-index: 120;
      display: inline-flex; align-items: center; gap: 8px;
      background: #000; color:#fff; text-decoration:none;
      border: 2px solid #fff; border-radius: 14px; padding: 8px 10px;
      box-shadow: 0 8px 18px rgba(0,0,0,.25); opacity:.96;
    }
    .brand-badge img{ height: 24px; width:auto; display:block; }
    .brand-badge .wordmark{ font-weight:700; letter-spacing:.2px; }
    @media (max-width:480px){
      .brand-badge{ left:12px; bottom: calc(var(--banner-h, 0px) + 12px); padding:6px 8px; border-radius:12px;}
      .brand-badge img{ height:20px; }
      .brand-badge .wordmark{ font-size:12px; }
    }

    .fade-in { opacity:0; transform: translateY(20px); animation: fadeInUp .6s ease forwards; }
    @keyframes fadeInUp { to { opacity:1; transform: translateY(0); } }

    /* ====== Mobilné MENU (bez JS) – off-canvas z toho istého <nav> ====== */
    /* prepínač + ikona */
    .nav-toggle{ display:none; }
    .burger{
      position: absolute; right: 12px; top: 10px;
      width:44px; height:44px; display:none; align-items:center; justify-content:center;
      border:1px solid #ffffff33; border-radius:10px; color:#e7eefc; cursor:pointer;
      background: transparent;
    }
    .burger svg{ width:22px; height:22px; }

    @media (max-width: 767.98px){
      .burger{ display:flex; }
      /* z nav-scroller spravíme zásuvný panel; sú to TIE ISTÉ tlačidlá */
      .nav-scroller{
        position: fixed; top: 0; right: 0; height: 100vh;
        width: min(80vw, 320px);
        background: #0c1f4b;
        padding: 88px 16px 16px;
        box-shadow: -24px 0 36px rgba(0,0,0,.35);
        transform: translateX(100%);
        transition: transform .25s ease;
      }
      .nav-track{
        flex-direction: column; gap: 10px; overflow: hidden; scroll-snap-type: none;
        align-items: stretch; justify-content: flex-start;
      }
      .pill{ width:100% !important; height:44px; border-radius:14px; font-size:1rem; }

      /* keď je checkbox zapnutý, otvor zásuvku */
      .nav-toggle:checked ~ .app-header .nav-scroller{ transform: translateX(0); }
    }
  </style>
</head>
<body>

  <!-- Prepínač pre hamburger (musí byť pred header, aby fungoval selektor ~) -->
  <input type="checkbox" id="menuToggle" class="nav-toggle" aria-hidden="true" />

  <!-- HLAVIČKA (logo + vycentrované tlačidlá) -->
  <header class="app-header" role="banner">
    <div class="app-header-inner">
      <img src="logo_lc.jpg" alt="Lištové centrum" class="logo-small">
      <div class="user-chip" id="userLabel">Prihlásený: …</div>

      <!-- Ikona hamburgeru (len mobil) -->
      <label for="menuToggle" class="burger" aria-label="Menu">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </label>

      <nav class="nav-scroller" aria-label="Hlavné sekcie">
        <div class="nav-track" id="navTrack">
          <button class="pill" id="goCatalogBtn">Katalóg</button>
          <button class="pill" id="goTimelineBtn">Lištobook</button>
          <button class="pill" id="goGameBtn">Hra</button>
          <button class="pill pill-danger" id="logoutBtn">Odhlásiť sa</button>
        </div>
      </nav>
    </div>
  </header>

  <!-- SLOT pre banner -->
  <div id="bannerSlot" aria-live="polite"></div>

  <!-- OBSAH -->
  <div class="scrollable-body">
    <div class="main-content fade-in">

      <div id="formInfo">
        Vitajte v našom Lištobooku.<br>
        slúži hlavne na výmenu informácií medzi majstrami pri práci s materiálmi zakúpenými v Lištovom centre.<br>
        Môžete si zvoliť prezývku a pod touto chatovať, vkladať svoje obrázky a fotky vašej práce na časovú os,
        písať recenzie na materiály a výrobky.<br>
        prosím, aby ste nepoužívali vulgarizmy prípadne urážali ostatných. v takom prípade vás odhlásime.
      </div>

      <!-- FORMULÁR NA MENO + MESTO -->
      <form id="userForm">
        <input type="text" id="name" placeholder="Prezývka" />
        <input type="text" id="note" placeholder="Mesto" />
        <button type="submit">Uložiť údaje</button>
      </form>

      <!-- FORMULÁR NA HESLO -->
      <form id="passwordForm">
        <h3>Zmena hesla</h3>
        <input type="password" id="oldPassword" placeholder="Staré heslo" />
        <input type="password" id="newPassword" placeholder="Nové heslo" />
        <input type="password" id="confirmPassword" placeholder="Potvrď nové heslo" />
        <button type="submit">Zmeniť heslo</button>
        <div id="passwordMessage" class="status-message"></div>
      </form>

    </div>
  </div>

  <!-- MarSab® badge -->
  <a class="brand-badge" href="#" aria-label="MarSab®">
    <img src="img/marsab_logo.png" alt="">
    <span class="wordmark">MarSab®</span>
  </a>

  <!-- Navigácia (tvoja pôvodná logika) -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const email = new URLSearchParams(window.location.search).get("email");
      const go = (page) => { window.location.href = email ? `${page}?email=${encodeURIComponent(email)}` : page; };
      document.getElementById("goCatalogBtn")?.addEventListener("click", ()=> go("catalog.html"));
      document.getElementById("goTimelineBtn")?.addEventListener("click", ()=> go("timeline.html"));
      document.getElementById("goGameBtn")?.addEventListener("click", ()=> go("game.html"));
      document.getElementById("logoutBtn")?.addEventListener("click", () => { window.location.href = "index.html"; });
    });
  </script>

  <!-- Hlavička: dopočet výšky (rezerva pod fixed header) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const header = document.querySelector('.app-header');
      const setHdrH = () => {
        if (!header) return;
        const h = header.getBoundingClientRect().height;
        document.documentElement.style.setProperty('--hdr-h', h + 'px');
      };
      setHdrH();
      window.addEventListener('resize', setHdrH);
    });
  </script>

  <!-- iba tento jeden riadok navyše -->
  <script src="/js/config.js"></script>

  <!-- LOGIKA -->
  <script src="dashboard.js"></script>

  <!-- Bannery -->
  <script src="banners.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      mountBannerRotator('bannerSlot', {
        fixed: true,
        position: 'bottom',
        pushContent: true,
        height: 160,
        heightMobile: 120,
        interval: 30000
      });
    });
  </script>
</body>
</html>
